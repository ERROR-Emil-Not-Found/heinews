{% extends "base.html" %}

{% block css %}
<link rel="stylesheet" href="/static/css/index.css">
{% endblock %}

{% block title %}heiNEws online{% endblock %}

{% block content %}
<div class="container" style="margin-left: 5%; margin-right: 5%;">

    <div class="container-xl">
    <br>
    <div id="carouselExampleDark" class="carousel carousel-dark slide" data-bs-ride="carousel">
        <div class="carousel-indicators">
            <button type="button" data-bs-target="#carouselExampleDark" data-bs-slide-to="0" class="active" aria-current="true" aria-label="Slide 1"></button>
            <button type="button" data-bs-target="#carouselExampleDark" data-bs-slide-to="1" aria-label="Slide 2"></button>
            <button type="button" data-bs-target="#carouselExampleDark" data-bs-slide-to="2" aria-label="Slide 3"></button>
            <!--<button type="button" data-bs-target="#carouselExampleDark" data-bs-slide-to="3" aria-label="Slide 4"></button>-->
        </div>
        <div class="carousel-inner">
            {% if announcements|length > 0 %} <!--Announcement-->
            <a href="{{ url_for('articles.announcement', id=announcements[0].id) }}">
                <div class="carousel-item active">
                    <img style="height: 600px; object-fit: cover; opacity: 1  ;" src="../static/img/placeholder.png" class="d-block w-100" alt="...">
                    <div class="carousel-caption d-none d-md-block">
                    <h5>{{ announcements[0].title }}</h5>
                    <p>{{ announcements[0].content }}</p>
                </div>
                </div>
            </a>
            {% else %}<!--No announcements yet-->
                <div class="carousel-item active">
                    <img style="height: 600px; object-fit: cover;" src="../static/img/placeholder.png" class="d-block w-100" alt="...">
                    <div class="carousel-caption d-none d-md-block">
                        <h5>@Fidex schreib hier rein was auch immer da stehen soll wenn es noch keine Ank√ºndigungen gibt</h5>
                        <p>Some representative placeholder content for the first slide.</p>
                    </div>
                </div>
            {% endif %}
            <!--TODO: Add description of the article (most upvoted article etc. so the user knows what the fuck the article is doing there)-->
            <!--Most upvoted article-->
            <a href="{{ url_for('articles.find_article', path=most_upvoted_article.id + '.html') }}">
                <div class="carousel-item">
                    <img style="height: 600px; object-fit: cover; opacity: 0.6;" src="{{ title_image_or_placeholder(most_upvoted_article) }}" class="d-block w-100" alt="...">
                    <div class="carousel-caption d-none d-md-block">
                        <h5>{{ most_upvoted_article.title }}</h5>
                        <p>{{ most_upvoted_article.description }}</p>
                    </div>
                </div>
            </a>
            <!--Most recent article-->
            <a href="{{ url_for('articles.find_article', path=most_recent_article.id + '.html') }}">
                <div class="carousel-item">
                    <img style="height: 600px; object-fit: cover; opacity: 0.6;" src="{{ title_image_or_placeholder(most_recent_article) }}" class="d-block w-100" alt="...">
                    <div class="carousel-caption d-none d-md-block">
                        <h5>{{ most_recent_article.title }}</h5>
                        <p>{{ most_recent_article.description }}</p>
                    </div>
                </div>
            </a>
            <!--@ErrorNameNotFound is something like a most viewed article possible?-->
        </div>
        <button class="carousel-control-prev" type="button" data-bs-target="#carouselExampleDark" data-bs-slide="prev">
            <span class="carousel-control-prev-icon" aria-hidden="true"></span>
            <span class="visually-hidden">Previous</span>
        </button>
        <button class="carousel-control-next" type="button" data-bs-target="#carouselExampleDark" data-bs-slide="next">
            <span class="carousel-control-next-icon" aria-hidden="true"></span>
            <span class="visually-hidden">Next</span>
        </button>
      </div>
<br>
<br>


{% if articles %}
    {% if aktuelles|length > 0 %}
    <!--<div id="carouselExampleControls" class="carousel carousel-dark slide" data-bs-ride="carousel">
        <div class="carousel-inner">
            <div class="carousel-item active">
                <div class="card-container" style="display: flex; justify-content: space-evenly;">
                {% for i in range(0, category|length, 4) %} the 3 is the "step" argument, basically the equivalent of "i += 3" in a java for loop
                {# the list likely won't be dividable by three, so this if statement is needed to not get any IndexOutOfBoundsExceptions #}
                {% if category[i] %}
                <div class="card card-block border-1 border-secondary" style="width: calc(100%/4)">
                    <a style="text-decoration: none;" href="{{ url_for('articles.find_article', path='{0}.html'.format(article.id)) }}">
                        <img src="{{ article.primary_image }}" style="max-height: 200px;" class="card-img-top" alt="">
                        <div class="card-body text-center py-4">
                            <h4 class="card-title">{{ article.title }}</h4>
                            <p class="lead card-subtitle">{{ article.description }}</p>
                        </div>
                    </a>    
                </div>
                {% endif %}

                {% if category[i + 1] %}
                    <div class="card card-block border-1 border-secondary" style="width: calc(100%/4)">
                        <a style="text-decoration: none;" href="{{ url_for('articles.find_article', path='{0}.html'.format(article.id)) }}">
                            <img src="{{ article.primary_image }}" style="max-height: 200px;" class="card-img-top" alt="">
                            <div class="card-body text-center py-4">
                                <h4 class="card-title">{{ article.title }}</h4>
                                <p class="lead card-subtitle">{{ article.description }}</p>
                            </div>
                        </a>    
                    </div>
                {% endif %}

                {% if category[i + 2] %}
                    <div class="card card-block border-1 border-secondary" style="width: calc(100%/4)">
                        <a style="text-decoration: none;" href="{{ url_for('articles.find_article', path='{0}.html'.format(article.id)) }}">
                            <img src="{{ article.primary_image }}" style="max-height: 200px;" class="card-img-top" alt="">
                            <div class="card-body text-center py-4">
                                <h4 class="card-title">{{ article.title }}</h4>
                                <p class="lead card-subtitle">{{ article.description }}</p>
                            </div>
                        </a>    
                    </div>
                {% endif %}

                {% if category[i + 3] %}
                    <div class="card card-block border-1 border-secondary" style="width: calc(100%/4)">
                        <a style="text-decoration: none;" href="{{ url_for('articles.find_article', path='{0}.html'.format(article.id)) }}">
                            <img src="{{ article.primary_image }}" style="max-height: 200px;" class="card-img-top" alt="">
                            <div class="card-body text-center py-4">
                                <h4 class="card-title">{{ article.title }}</h4>
                                <p class="lead card-subtitle">{{ article.description }}</p>
                            </div>
                        </a>    
                    </div>
                {% endif %}
                </div>
            </div>
        </div>
        <button class="carousel-control-prev" type="button" data-bs-target="#carouselExampleControls" data-bs-slide="prev">
            <span class="carousel-control-prev-icon" aria-hidden="true"></span>
            <span class="visually-hidden">Previous</span>
        </button>
        <button class="carousel-control-next" type="button" data-bs-target="#carouselExampleControls" data-bs-slide="next">
            <span class="carousel-control-next-icon" aria-hidden="true"></span>
            <span class="visually-hidden">Next</span>
        </button>
</div>

{% endfor %}
-->
    <div id="carouselExampleControls" class="carousel carousel-dark slide" data-bs-ride="carousel">
        <div class="carousel-inner">
            <div class="carousel-item active">
                <div class="card-container" style="display: flex; justify-content: space-evenly;">
                    {% for article in aktuelles %}
                    <div class="card card-block border-1 border-secondary" style="width: calc(100%/4)">
                        <a style="text-decoration: none;" href="{{ url_for('articles.find_article', path='{0}.html'.format(article.id)) }}">
                            <img src="{{ article.primary_image }}" style="max-height: 200px;" class="card-img-top" alt="">
                            <div class="card-body text-center py-4">
                                <h4 class="card-title">{{ article.title }}</h4>
                                <p class="lead card-subtitle">{{ article.description }}</p>
                            </div>
                        </a>    
                    </div>
                    {% endfor %}
                </div>
            </div>
        </div>
        <button class="carousel-control-prev" type="button" data-bs-target="#carouselExampleControls" data-bs-slide="prev">
            <span class="carousel-control-prev-icon" aria-hidden="true"></span>
            <span class="visually-hidden">Previous</span>
        </button>
        <button class="carousel-control-next" type="button" data-bs-target="#carouselExampleControls" data-bs-slide="next">
            <span class="carousel-control-next-icon" aria-hidden="true"></span>
            <span class="visually-hidden">Next</span>
        </button>
    </div>
    {% endif %}
    {% else %}
        <h5>there's no articles... yet</h5>
    </div>
{% endif %}

{% endblock %}