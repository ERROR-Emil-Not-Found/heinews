{% extends "base.html" %}

{% block title %}{{ current_user.name }}{% endblock %}

{% block content %}
<!--Keep side distance (Bootstrap)-->
<div class="container-xl">
    <br>
    <br>
    <h1>Profil</h1>
    <br>
    <table class="table">
        <tr>
            <th>Name:</th>
            <td>{{  current_user.name  }}</td>
        </tr>
        <tr>
            <th>Email:</th>
            <td>{{  current_user.email  }}</td>
        </tr>
        <tr>
            <th>Role:</th>
            <td>{{  current_user.role  }}</td>
        </tr>
        <tr>
            <th>recieve email notifications</th>
            <td>{{  current_user.notifications  }}</td>
        </tr>
        <tr>
            <th>Password:</th>
            <td>
                {% if reset %}
                    <a href="{{ url_for('auth.reset_password', reset_id=reset) }}">Passwort zur√ºcksetzen (TODO send this per email)</a>
                {% else %}
                    <form action="{{ url_for('auth.create_reset_token', user_id=current_user.id) }}">
                        <button type="submit">Request password reset</button>
                    </form>
                {% endif %}
            </td>
        </tr>
    </table>
    <br>
    <h2>Analysis tool or sth</h2>
    <br>
    <table class="table">
        <tr>
            <th>Articles upvoted:</th>
            <td>{{ upvoted|length }}</td>
            {% for article in upvoted %}
                <a href="{{ url_for('articles.find_article', path='{0}.html'.format(article.id)) }}">
                    {{ article.title }}
                </a>
                <br>
            {% endfor %}
        </tr>
        <tr>
            <th>Articles uploaded:</th>
            <td>{{ uploaded|length }}</td>
        </tr>
    </table>
    {% for article in uploaded %}
        <h5><a href="{{ url_for('articles.find_article', path='{0}.html'.format(article.id)) }}">
            {{ article.title }}
        </a></h5>
    {% endfor %}
    <br>
        <h5>link is designed to work with manually entering it into browser -> clicking on this will lead to 404 error, in url remove the first 
            127.0.0.1/
        </h5>
        <a href="{{ verification_link }}">{{ verification_link }}</a>
        <!--TODO: move logout here?-->
    {% endblock %}
</div>